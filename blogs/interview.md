<a href="https://github.com/yjy5264"><img style="position: absolute; top: 0; left: 0; border: 0;" src="https://github.com/yjy5264/yjy5264.github.io/raw/master/images/forkMe.png" alt="Fork me on GitHub"></a>
# 前端知识点整理

## react

### 虚拟DOM
1. 将虚拟的新DOM和旧DOM使用diff算法对比差异
2. 得出差异DOM，然后对真实的DOM进行更新

### diff
1. tree diff 只对同一层级节点比较
2. component diff 比较组件类型
3. element diff 同一层级子节点通过id区分

### 优化
1. shouldComponentUpdate里控制子视图是否需要更新
2. 由于需要深复制props进行比较，使用immutableJs可以提升速度

### V16
1. Fiber，计算分片化，实现调度功能，异步渲染，不阻塞线程
2. createPortal，渲染到React父节点之外的DOM中
3. Render可以返还数组
4. 错误处理
5. 更小体积
6. 提升服务端渲染性能

### Fiber
1. 设置渲染任务的优先
2. 采用新的Diff算法
3. 采用虚拟栈设计允许当优先级更高的渲染任务和较低优先的任务之间来回切换

### 高阶组件
1. 高阶组件可以看做是装饰器模式(Decorator Pattern)在React的实现。即允许向一个现有的对象添加新的功能，同时又不改变其结构，属于包装模式(Wrapper Pattern)的一种
2. 属性代理，引入里我们写的最简单的形式，就是属性代理(Props Proxy)的形式。应用，操作props，抽离state
3. 反向继承(Inheritance Inversion)，简称II，II采用通过 去继承WrappedComponent，本来是一种嵌套的关系，结果II返回的组件却继承了WrappedComponent，这看起来是一种反转的关系。通过继承WrappedComponent，除了一些静态方法，包括生命周期，state，各种function，我们都可以得到。应用，渲染劫持

### 组件分类
1. 纯展示型的组件，数据进，DOM出，直观明了
2. 接入型组件，在React场景下的container component，这种组件会跟数据层的service打交道，会包含一些跟服务器或者说数据源打交道的逻辑，container会把数据向下传递给展示型组件
3. 交互型组件，典型的例子是对于表单组件的封装和加强，大部分的组件库都是以交互型组件为主，比如说Element UI，特点是有比较复杂的交互逻辑，但是是比较通用的逻辑，强调组件的复用
4. 功能型组件，以Vue的应用场景举例，路由的router-view组件、transition组件，本身并不渲染任何内容，是一个逻辑型的东西，作为一种扩展或者是抽象机制存在

## JS

### 函数式编程
1. 函数是变量
2. 数据不可变
3. 强制使用纯函数（输入输出没有副作用）
4. 组合函数 compose pipeline
5. 柯里化（有利于函数合成）

### 闭包
1. 闭包就是能够读取其他函数内部变量的函数
2. 最大用处有两个，一个是前面提到的可以读取函数内部的变量，另一个就是让这些变量的值始终保持在内存中

### Event Loop
1. 所有同步任务都在主线程上执行，形成一个执行栈（execution context stack）
2. 主线程之外，还存在一个"任务队列"（task queue）。只要异步任务有了运行结果，就在"任务队列"之中放置一个事件
3. 一旦"执行栈"中的所有同步任务执行完毕，系统就会读取"任务队列"，看看里面有哪些事件。那些对应的异步任务，于是结束等待状态，进入执行栈，开始执行
4. 主线程不断重复上面的第三步

### 内存管理
1. 垃圾收集器会定期（周期性）找出那些不在继续使用的变量，然后释放其内存
2. 标记清除，标记不可访问的对象，下次垃圾收集器清理内存的时候被释放
3. 引用计数

### 防抖（Debouncing）
1. 针对高频事件，防抖就是将多个触发间隔接近的事件函数执行，合并成一次函数执行。
2. 实现防抖的关键点主要有两个，如下：
3. 使用setTimeout延时器，传入的延迟时间，将事件处理函数延迟执行，并且通过事件触发频率与延迟时间值的比较，控制处理函数是否执行
4. 使用柯里化函数结合闭包的思想，将执行状态保存在闭包中，返回新函数，在新函数中通过执行状态控制是否在滚动时执行处理函数

### 节流（Throttle）
1. 节流也是将多个触发间隔接近的事件函数执行，合并成一次函数执行，并且在指定的时间内至少执行一次事件处理函数。
2. 节流实现原理跟防抖技术类似，但是比防抖多了一次函数执行判断，实现的关键点是：
3. 利用闭包存储了当前和上一次执行的时间戳，通过两次函数执行的时间差跟指定的延迟时间的比较，控制函数是否立刻执行

## 基础

### PWA
1. Service Workerss可以使PWA后台运行

### 域名
1. 域名收敛：就是将静态资源放在一个域名下。减少DNS解析的开销
2. 域名发散：是将静态资源放在多个子域名下，就可以多线程下载，提高并行度，使客户端加载静态资源更加迅速
3. 域名发散是pc端为了利用浏览器的多线程并行下载能力。而域名收敛多用与移动端，提高性能，因为dns解析是是从后向前迭代解析，如果域名过多性能会下降，增加DNS的解析开销

### 优化
1. 渲染优化：不重复渲染子组件，同构直出，服务端渲染
2. 网络优化：移动端域名收敛，PC端域名发散，合理利用CDN，HTTP缓存cache-control，合并请求，懒加载载入大文件，HTTP/2 server push，IPv6
3. 文件优化：压缩JS，CSS Sprite合并图片，service worker缓存文件
4. 动画：requestAnimationFrame

## 网络

### ajax
1. Web app的基础，实现异步与服务器通信
2. 由于api不友好，现在有promise格式的fetch出现，但fetch不支持上传文件进度回调

### url 
1. protocol 协议，常用的协议是http
2. hostname 主机地址，可以是域名，也可以是IP地址
3. port 端口 http协议默认端口是：80端口，如果不写默认就是:80端口
4. path 路径 网络资源在服务器中的指定路径
5. parameter 参数 如果要向服务器传入参数，在这部分输入
6. query 查询字符串 如果需要从服务器那里查询内容，在这里编辑
7. fragment 片段 网页中可能会分为不同的片段，如果想访问网页后直接到达指定位置，可以在这部分设置

### https
1. 获取服务器公钥和证书,
验证证书，生成浏览器私钥，
将请求和浏览器私钥加密发送给服务器,
服务端用服务器私钥解密请求,
用浏览器私钥加密返回数据给浏览器,
浏览器用浏览器私钥解密获得数据
2. 浏览器对称加密,服务器非对称加密

### http/1.1
1. HTTP 1.1支持持久连接，在一个TCP连接上可以传送多个HTTP请求和响应，减少了建立和关闭连接的消耗和延迟

### TCP三次握手与四次挥手
1. 三次握手，确认双发都能发送和接收信息
2. 四次挥手，结束连接前确认信息是否发送完毕

### 分层网络协议
1. 物理层，对应网线、网卡、接口等物理设备(位)
2. 数据链路层，将由物理层传来的未经处理的位数据包装成数据帧
3. 网络层，提供了编址方案,IP协议工作的地方(数据包）
4. 传输层，负责错误的检查与修复，以确保传送的质量，是TCP工作的地方。（报文）
5. 会话层，建立起两端之间的会话关系，并负责数据的传送
6. 表示层，数据语法的转换、数据的传送等
7. 应用层，指网络操作系统和具体的应用程序，对应WWW服务器、FTP服务器、HTTP协议等应用软件

### 缓存
1. Expires是HTTP/1.0控制网页缓存的字段，其值为服务器返回该请求结果缓存的到期时间
2. 在HTTP/1.1中，Cache-Control是最重要的规则，主要用于控制网页缓存，主要取值为：
1. public：所有内容都将被缓存（客户端和代理服务器都可缓存）
2. private：所有内容只有客户端可以缓存，Cache-Control的默认取值
3. no-cache：客户端缓存内容，但是是否使用缓存则需要经过协商缓存来验证决定
4. no-store：所有内容都不会被缓存，即不使用强制缓存，也不使用协商缓存
5. max-age=xxx (xxx is numeric)：缓存内容将在xxx秒后失效

## 安全

### XSS attack
1. XSS(Cross-site scripting)，跨站脚本攻击
2. 将脚本嵌入到目标页面，用户打开页面即被攻击，并可以获取用户cookie
3. 过滤脚本

### CSRF
1. cross-site request forgery， 跨域假冒请求
2. 通过跨域请求的方式获取用户cookie进行攻击
3. 防御策略，重要请求不使用GET方法

### sql注入
1. 通过表单的方式将sql语句插入到服务端
2. 校验
3. 重要信息加密

### DDoS
1. 一般指分布式拒绝服务攻击
2. 利用合理的服务请求来占用过多的服务资源，从而使合法用户无法得到服务的响应
